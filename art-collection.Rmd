---
output: html_fragment
---
Week 3 of #TidyTuesday features data from the Tate Art Museum. The following expert is a brief description from the Tate Art Museum 

> In 1889 Henry Tate, an industrialist who had made his fortune as a sugar refiner, offered his collection of British nineteenth-century art to the nation and provided funding for the first Tate Gallery. A campaign was begun to create a new gallery dedicated to British art. With the help of an £80,000 donation from Tate himself, the gallery at Millbank, now known as Tate Britain, was built and opened in 1897. Tate’s original bequest of works, together with works from the National Gallery, formed the founding collection. Today Tate has four major sites and the national collection of British art from 1500 to the present day and international modern and contemporary art, which includes nearly 70,000 artworks. © Tate, London [2020]

The Tate data is presented in two datasets, one with the metadata for the nearly 70,000 art pieces and one with metadata on nearly 3,500 associated artists. First we will load the data using the `tt_load()` command of the `tidytuesdayR` package. 

```{r setup, include=FALSE, results='hide'}

knitr::opts_chunk$set(echo = TRUE)

library(tidyverse)
library(tidytuesdayR)
library(ggridges)
```

```{r, message = FALSE,  results='hide'}

tt <- tt_load("2021-01-12")
artists <- tt$artists
artwork <- tt$artwork
```

There now is two dataframes, artists and artwork. Using `glimpse()` makes it possible to see the name of every column. Before I begin planning the visual, I want to see what data I'm working with. 

```{r}
glimpse(artists)
glimpse(artwork)
```

The artists data frame has 9 variables: id, name, gender, year of birth, year of death, place of birth, place of death and url. The artwork data frame has 20 variables that correspond to the metadata of the art pieces, including id, accession number, artist, artist role, artist id, title, data text, medium, credit line, year, acquisition and dimensions. 

That's a lot of information! I'm still not sure how to organize the data, so I'm going to start cleaning it up. A few categories stick out to me in both the artists and artwork data frames. I can select only those columns to make it easier to comprehend the data. Since each art piece has a corresponding artist in the artists data frame,  I can use `inner_join()` to join the two data frame together, resulting in a data frame, art_data, with all the information. 

```{r}
artists <- artists %>% 
  select(name, gender, yearOfBirth, yearOfDeath, placeOfBirth, placeOfDeath) 

artwork <- artwork %>% 
  select(artist, medium, year)

art_data <- artwork %>%
  inner_join(artists, by = c( "artist" = "name"))
```

Once again using `glimpse()`, we can preview the data to better understand what we are working with. `glimpse()` will also provide the class of each column, which is important for determining what type of statistical analysis to perform. 

```{r}
glimpse(art_data)
```

Immediately, I'm interested in the medium column. I start to wonder how the medium changes in relation to a variety of factors, including year, artist gender and artist place of birth. I decide on analyzing the distribution of medium by year. Specifically, I want to see if certain mediums are popular during certain time periods. The Tate Art Museum defines the medium as: 

> type of art (e.g. painting, sculpture, printmaking), as well as the materials an artwork is made from. For example a sculpture in the medium of bronze or marble; a painting in the medium of oil paint on canvas, or watercolour on paper; a drawing in the medium of pencil or crayon; a print in the medium of etching or lithography. © Tate, London [2020]

Should be pretty easy, right? Let's look at the medium data one more time. 

```{r}
head(art_data$medium)
```

Looks like the data for the medium column isn't presented as distinct categories (i.e. oil, watercolor, acrylic, etc) but rather in a more description-like format. This makes processing the data tricky and we'll have to perform some data manipulation before plotting. 

First, `filter()` is used to remove all NA entries for medium. Then, `mutate()` allows us to change the entries in the medium column. Within the `mutate()` command, we'll use a combination of the `stringr` and `forcats` packages (these are both included in the `tidyverse` package). 

`str_extract()` extracts matching patterns from a spring. By indicating "^([^]+)" inside the parentheses, the first word of the string before the space is extracted. Then, `str_replace()` cleans up some of the data by replacing any commas present with a space. To better organize the categorizes, `fct_recode()` renames and collapses some of the factors. Line and Engraving were reclassified under the same factor, "Paper/Engraving" and Pen and Ink were reclassified as "Pen/Ink". `str_trim()` removes any extra white space around the string and `filter(!is.na(year))` removes all entries that lack a year value. 

```{r message=FALSE, warning=FALSE}
#recoding medium categories
art_medium <- art_data %>% 
  filter(!is.na(medium)) %>% 
  mutate(
    medium = str_extract(medium, "^([^ ]+)"),
    medium = str_replace(medium, ",", " "), 
    medium = fct_recode(medium, "Paper/Engraving" = "Line", 
                        "Paper/Engraving" = "Engraving", 
                        "Pen/Ink" = "Pen", 
                        "Pen/Ink" = "Ink"), 
    medium = str_trim(medium)) %>% 
  filter(!is.na(year))
```


I want to look at art pieces from the 19th century onward, so `filter()` is used to select all years equal to  or greater than 1800. I only want to analyze the top 10 pieces of art-work so I'll create a separate data frame that lists the top 10 media and select the top 10 medium categories. 

```{r message=FALSE, warning=FALSE}
art_medium_check <- art_medium %>% 
  filter(year >= 1800) %>% 
  group_by(medium) %>% 
  summarize(
    n = n()) %>% 
  arrange(desc(n))

art_medium_cnt <- art_medium %>% 
  group_by(year, medium) %>% 
  select(medium, year) %>% 
  filter(year >= 1800) %>% 
  arrange(year) %>% 
  filter(medium %in% c("Graphite", 
                       "Oil", 
                       "Screenprint", 
                       "Lithograph", 
                       "Etching", 
                       "Watercolour", 
                       "Photograph", 
                       "Pen/Ink", 
                       "Paper/Engraving", 
                       "Gouache"))
```

Finally, it is time to plot! I want to focus on mastering the basics of ggplot before I move on to creating aesthetic themes, so today's plot is rather basic. 

```{r message=FALSE, warning=FALSE}
art_medium_cnt %>% 
  ggplot(aes(x = year, y = fct_reorder(medium,year), fill = medium)) + 
  geom_density_ridges() + 
  theme_minimal() +
  theme(
    panel.grid.major = element_blank(), 
    panel.grid.minor = element_blank(), 
    legend.position = "none", 
    plot.title = element_text(face = "bold")) + 
  labs(title = "Popular Mediums in the Tate Art Museum", 
       subtitle = "The 10 most commonly used mediums in artwork produced since 1800", 
       caption = "Data: Tate Collection | Plot: Juliacat23", 
       x = "", 
       y = "") 

```

And that concludes this week's #TidyTuesday entry! Next week, I want to continue to develop an understanding of GGPlot and learning to customize themes. 